{"version":3,"sources":["appointmentRoutes.js"],"names":["Appointment","require","User","router","express","Router","bookAppointment","authMiddleware","post","module","exports","req","res","_req$body","doctorId","date","patientId","doctor","appointment","regeneratorRuntime","async","_context","prev","next","body","user","id","abrupt","status","json","message","awrap","findById","sent","role","Date","save","t0","error","stop"],"mappings":"aAAA,IAAMA,YAAcC,QAAQ,yBACtBC,KAAOD,QAAQ,kBADfD,QAAWC,QAAGA,WAGdE,OAASC,QAAQC,kBAFFJ,QAArB,wCAAUK,yBAAAA,gBAIJC,eAAiBN,QAAQ,gCAE/BE,OAAOK,KAAK,IAAKD,eAAgBD,iBAEjCG,OAAOC,QAAUP,OAGjBO,QAAQJ,gBAAkB,SAAOK,EAAKC,GAAZ,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,GAAAV,EAPKF,EAAAa,KAAzBjB,EAOoBM,EAPpBN,SAAcQ,EAOMF,EAPNE,KASZC,EAAYL,EAAIc,KAAKC,GAEtBZ,GAAaC,EAJM,CAAAM,EAAAE,KAAA,EAAA,MAAA,OAAAF,EAAAM,OAAA,SAHnBjB,EAAPkB,OAAiBzB,KAAjB0B,KAAA,CAAAC,QAAA,qCAG0B,KAAA,EAAA,OAAAT,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAAAJ,mBAAAY,MASD7B,KAAK8B,SAASlB,IATb,KAAA,EAAA,IAShBG,EATgBI,EAAAY,OAAA,WAAAhB,EAAAiB,KAAA,CAAAb,EAAAE,KAAA,GAAA,MAAA,OAAAF,EAAAM,OAAA,SAAAf,EAAAgB,OAAA,KAAAC,KAAA,CAAAC,QAAA,sBAAA,KAAA,GAAA,OAAAZ,EACGP,IAAIa,YADP,CAElBR,UAAAA,EAcFF,SAAAA,EAhBoBC,KAAA,IAIpBoB,KAACrB,KAJmBO,EAAAE,KAAA,GAAAJ,mBAAAY,MAAAb,EAAAkB,QAAA,KAAA,GAqBtBxB,EAAIgB,OAAO,KAAKC,KAAK,CAAEC,QAAS,kCAAmCZ,YAAAA,IArB7CG,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAgB,GAAAhB,EAAA,MAAA,GAKQS,EAAAA,OAAAA,KAAOD,KAAE,CAAAC,QAAA,eAAAQ,MAAAjB,EAAAgB,GAAAP,UALjB,KAAA,GAAA,IAAA,MAAA,OAAAT,EAAAkB,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA","file":"appointmentRoutes.min.js","sourcesContent":["const Appointment = require('../models/appointment');\r\nconst User = require('../models/user');\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst { bookAppointment } = require('../controllers/appointmentController');\r\nconst authMiddleware = require('../middleware/authMiddleware');\r\n\r\nrouter.post('/', authMiddleware, bookAppointment); // Book appointment\r\n\r\nmodule.exports = router;\r\n\r\n\r\nexports.bookAppointment = async (req, res) => {\r\n  const { doctorId, date } = req.body;\r\n  const patientId = req.user.id;\r\n\r\n  if (!doctorId || !date) {\r\n    return res.status(400).json({ message: 'Doctor ID and date are required' });\r\n  }\r\n\r\n  try {\r\n    const doctor = await User.findById(doctorId);\r\n    if (!doctor || doctor.role !== 'doctor') {\r\n      return res.status(404).json({ message: 'Doctor not found' });\r\n    }\r\n\r\n    const appointment = new Appointment({\r\n      patientId,\r\n      doctorId,\r\n      date: new Date(date),\r\n    });\r\n\r\n    await appointment.save();\r\n    res.status(201).json({ message: 'Appointment booked successfully', appointment });\r\n  } catch (err) {\r\n    res.status(500).json({ message: 'Server error', error: err.message });\r\n  }\r\n};\r\n"]}